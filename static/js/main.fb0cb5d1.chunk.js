(this.webpackJsonpdemo=this.webpackJsonpdemo||[]).push([[0],{56:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(9),s=n.n(i),r=(n(82),n(83),n(62)),l=n(40),o=n(63),d=n(128),h=n(129),j=n(133),u=n(130),b=n(127),v=n(132),O=n(32),p=n.n(O),x=n(41),f=n(42),m=n(43),g=n(20),y=n(49),_=n(48),C=n(134),D=n(126),S=(n(56),n(3)),k=function(e){Object(y.a)(n,e);var t=Object(_.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={error:null,isLoaded:!1,items:[],value:"",count:0,getCurrentDate:function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,a=e.getFullYear();return"".concat(t,"-").concat(n<10?"0".concat(n):"".concat(n),"-").concat(a)},pin:function(){return a.state.value?a.state.value:"500021"},dfetch:function(){fetch("https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByPin?pincode=".concat(a.state.pin(),"&date=").concat(a.state.getCurrentDate())).then((function(e){return e.json()})).then((function(e){a.setState({isLoaded:!0,items:e.sessions})}),(function(e){a.setState({isLoaded:!0,error:e})}))}},a.handleChange=a.handleChange.bind(Object(g.a)(a)),a.searchPin=a.searchPin.bind(Object(g.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.state.dfetch()}},{key:"handleChange",value:function(){var e=Object(x.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({value:t.target.value});case 2:console.log(this.state.value);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchPin",value:function(){console.log("Ostundi"),this.setState({count:1}),this.state.dfetch()}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.isLoaded,a=e.items;return t?Object(S.jsxs)("div",{children:["Error: ",t.message]}):n?(console.log(this.state.value),Object(S.jsxs)("div",{children:[Object(S.jsx)(C.a,{id:"filled-search",label:"Enter Pincode",type:"search",variant:"outlined",value:this.state.value,onChange:this.handleChange}),Object(S.jsx)("div",{style:{marginTop:"15px"},children:Object(S.jsx)(D.a,{style:{marginBottom:"20px"},variant:"contained",color:"primary",onClick:this.searchPin,children:"Search"})}),Object(S.jsx)("div",{children:void 0===a?Object(S.jsx)("div",{children:"Enter valid pin"}):0===a.length&&""===this.state.value?Object(S.jsx)("div",{children:"  "}):0===a.length&&1===this.state.count?Object(S.jsx)("div",{children:" No Vaccination slots available please come back later "}):Object(S.jsxs)("table",{style:{width:"100%"},children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:"Center Name"}),Object(S.jsx)("th",{children:"Address"}),Object(S.jsx)("th",{children:"From - To"}),Object(S.jsx)("th",{children:"FeeType | Fee | Min Age"}),Object(S.jsx)("th",{children:"Available | Dose1 | Dose2"}),Object(S.jsx)("th",{children:"Vaccine"})]})}),Object(S.jsx)("tbody",{children:a.map((function(e){return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:e.name}),Object(S.jsx)("td",{children:e.address}),Object(S.jsxs)("td",{children:[e.from," - ",e.to]}),Object(S.jsxs)("td",{children:[e.fee_type," | ",e.fee," | ",e.min_age_limit,"+"]}),Object(S.jsxs)("td",{children:[e.available_capacity," | ",e.available_capacity_dose1," | ",e.available_capacity_dose2]}),Object(S.jsx)("td",{children:e.vaccine})]})}))})]})})]})):Object(S.jsx)("div",{children:"Loading..."})}}]),n}(a.Component),L=n(131),w=n(136),V=n(135),F=function(e){Object(y.a)(n,e);var t=Object(_.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={error:null,merror:null,isLoaded:!1,misLoaded:!1,disIsLoaded:!1,items:[],distr:[],res:[],sValue:"",dValue:"",id:1,getCurrentDate:function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,a=e.getFullYear();return"".concat(t,"-").concat(n<10?"0".concat(n):"".concat(n),"-").concat(a)},statefetch:function(){fetch("https://cdn-api.co-vin.in/api/v2/admin/location/states").then((function(e){return e.json()})).then((function(e){a.setState({isLoaded:!0,items:e.states})}),(function(e){a.setState({isLoaded:!0,error:e})}))},distfetch:function(e){console.log("state ID"+e),fetch("https://cdn-api.co-vin.in/api/v2/admin/location/districts/".concat(e)).then((function(e){return e.json()})).then((function(e){a.setState({disIsLoaded:!0,distr:e.districts})}),(function(e){a.setState({disIsLoaded:!0,error:e})}))},sessfetch:function(){fetch("https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict?district_id=".concat(a.state.dValue,"&date=").concat(a.state.getCurrentDate())).then((function(e){return e.json()})).then((function(e){a.setState({isLoaded:!0,res:e.sessions})}),(function(e){a.setState({isLoaded:!0,merror:e})}))},getID:function(){return a.state.id+=a.state.id,a.state.id}},a.stateHandleChange=a.stateHandleChange.bind(Object(g.a)(a)),a.searchDist=a.searchDist.bind(Object(g.a)(a)),a.districtHandleChange=a.districtHandleChange.bind(Object(g.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.state.statefetch()}},{key:"searchDist",value:function(){this.state.sessfetch(),console.log("dvalue"+this.state.dValue)}},{key:"stateHandleChange",value:function(e){var t=e.target.value;console.log("stateid"+t),this.state.distfetch(t)}},{key:"districtHandleChange",value:function(){var e=Object(x.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.value,console.log("DID"+n),e.next=4,this.setState((function(e,t){return{dValue:n}}));case 4:console.log("dist ID"+this.state.dValue);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.error,a=t.isLoaded,c=t.items,i=t.distr,s=t.res;console.log("result"+s.length);var r=s.map((function(t){return[{id:e.state.getID(),col1:t.name,col2:t.address,col3:[t.from,t.to],col4:[t.fee_type,t.fee,t.min_age_limit],col5:[t.available_capacity,t.available_capacity_dose1,t.available_capacity_dose2],col6:t.vaccine}]}));return console.log("value rows "+r.length),n?Object(S.jsxs)("div",{children:["Error: ",n.message]}):a?Object(S.jsxs)("div",{children:[Object(S.jsxs)(V.a,{variant:"outlined",style:{minWidth:240},children:[Object(S.jsx)(w.a,{htmlFor:"outlined-age-native-simple",children:"Select State"}),Object(S.jsxs)(L.a,{native:!0,onChange:this.stateHandleChange,label:"Select State",children:[Object(S.jsx)("option",{"aria-label":"None",value:""}),c.map((function(e){return Object(S.jsx)("option",{value:e.state_id,children:e.state_name})}))]})]}),Object(S.jsxs)(V.a,{variant:"outlined",style:{minWidth:240},children:[Object(S.jsx)(w.a,{htmlFor:"outlined-age-native-simple",children:"Select District"}),Object(S.jsxs)(L.a,{native:!0,onChange:this.districtHandleChange,label:"Select District",children:[Object(S.jsx)("option",{"aria-label":"None",value:this.state.dValue}),i.map((function(e){return Object(S.jsx)("option",{value:e.district_id,children:e.district_name})}))]})]}),Object(S.jsx)("div",{style:{marginTop:"15px",marginBottom:"15px"},children:Object(S.jsx)(D.a,{variant:"contained",color:"primary",onClick:this.searchDist,children:"Search"})}),void 0===s?Object(S.jsx)("div",{children:" No vaccine slots available please come back later "}):Object(S.jsx)("div",{children:Object(S.jsxs)("table",{style:{width:"100%"},children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:"Center Name"}),Object(S.jsx)("th",{children:"Address"}),Object(S.jsx)("th",{children:"From - To"}),Object(S.jsx)("th",{children:"FeeType | Fee | Min Age"}),Object(S.jsx)("th",{children:"Available | Dose1 | Dose2"}),Object(S.jsx)("th",{children:"Vaccine"})]})}),Object(S.jsx)("tbody",{children:s.map((function(e){return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:e.name}),Object(S.jsx)("td",{children:e.address}),Object(S.jsxs)("td",{children:[e.from," - ",e.to]}),Object(S.jsxs)("td",{children:[e.fee_type," | ",e.fee," | ",e.min_age_limit,"+"]}),Object(S.jsxs)("td",{children:[e.available_capacity," | ",e.available_capacity_dose1," | ",e.available_capacity_dose2]}),Object(S.jsx)("td",{children:e.vaccine})]})}))})]})})]}):Object(S.jsx)("div",{children:"Loading..."})}}]),n}(a.Component),I=["children","value","index"];function H(e){var t=e.children,n=e.value,a=e.index,c=Object(o.a)(e,I);return Object(S.jsx)("div",Object(l.a)(Object(l.a)({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},c),{},{children:n===a&&Object(S.jsx)(v.a,{p:3,children:Object(S.jsx)(b.a,{children:t})})}))}function N(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var A=Object(d.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}));function B(){var e=A(),t=c.a.useState(0),n=Object(r.a)(t,2),a=n[0],i=n[1];return Object(S.jsxs)("div",{className:e.root,children:[Object(S.jsx)(h.a,{position:"static",children:Object(S.jsxs)(j.a,{value:a,onChange:function(e,t){i(t)},"aria-label":"simple tabs example",children:[Object(S.jsx)(u.a,Object(l.a)({label:"Search By Pin"},N(0))),Object(S.jsx)(u.a,Object(l.a)({label:"Search By District"},N(1)))]})}),Object(S.jsx)(H,{value:a,index:0,children:Object(S.jsx)(k,{})}),Object(S.jsx)(H,{value:a,index:1,children:Object(S.jsx)(F,{})})]})}var M=function(){return Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)("h1",{children:"Covid Vaccination slots search by pin or districts"}),Object(S.jsx)(B,{})]})};s.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(M,{})}),document.getElementById("root"))}},[[89,1,2]]]);
//# sourceMappingURL=main.fb0cb5d1.chunk.js.map